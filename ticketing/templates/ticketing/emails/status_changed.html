{% extends "ticketing/emails/base_email.html" %}

{% block title %}Ticket Status Updated - {{ ticket.ticket_number }}{% endblock %}

{% block header %}Ticket Status Changed{% endblock %}

{% block content %}
<h2>Ticket Status Update</h2>

<p>The status of your ticket has been updated:</p>

<div class="ticket-info">
    <h3>{{ ticket.ticket_number }} - {{ ticket.subject }}</h3>

    <div class="info-row">
        <span class="label">Previous Status:</span>
        <span class="status-badge status-{{ old_status }}">{{ old_status|title }}</span>
    </div>

    <div class="info-row">
        <span class="label">New Status:</span>
        <span class="status-badge status-{{ new_status }}">{{ new_status|title }}</span>
    </div>

    <div class="info-row">
        <span class="label">Priority:</span>
        <span class="value priority-{{ ticket.priority }}"><strong>{{ ticket.get_priority_display }}</strong></span>
    </div>

    {% if ticket.assigned_to %}
    <div class="info-row">
        <span class="label">Assigned To:</span>
        <span class="value">{{ ticket.assigned_to.get_full_name|default:ticket.assigned_to.username }}</span>
    </div>
    {% endif %}

    <div class="info-row">
        <span class="label">Last Updated:</span>
        <span class="value">{{ ticket.updated_at|date:"F d, Y g:i A" }}</span>
    </div>
</div>

<a href="{{ site_url }}/admin/ticketing/ticket/{{ ticket.id }}/" class="button">View Ticket</a>

<p style="color: #6c757d; font-size: 14px;">
    <em>Ticket Reference: {{ ticket.ticket_number }}</em>
</p>
{% endblock %}
